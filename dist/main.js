(()=>{"use strict";const e=(()=>{let e=[];function t(t){return e[t]}return{addProject:function(t){e.push(t)},getProjects:function(){return e},getProject:t,addTask:function(e,c){t(e).name.push(c)},removeTask:function(e,c){t(e).name.splice(c,1)},deleteProject:function(t){let c;e.forEach(((e,n)=>{e.getProjectName()===t&&(c=n)})),e.splice(c,1)},setProjects:function(t){e=t}}})();class t{constructor(e){this.projectName=e}name=[];getProjectName(){return this.projectName}getProjectItems(){return this.name}getProjectTask(e){return this.name[e]}removeTaskByIndex(e){let t;this.name.forEach(((c,n)=>{c.title===e&&(t=n)})),this.name.splice(t,1)}}const c=class{constructor(e,t,c,n){this.title=e,this.desc=t,this.dueDate=c,this.piority=n}complete=!1;edit(e,t,c,n){this.title=e,this.desc=t,this.dueDate=c,this.piority=n}setDone(){this.complete=!0}setUnDone(){this.complete=!1}};(()=>{const n=document.querySelector(".taskCreationMenu"),o=document.querySelector(".submit"),s=document.querySelector(".addProjectBtn"),r=document.querySelector(".addTaskBtn"),a=document.querySelector(".tasks"),d=document.querySelector(".project"),i=document.querySelector(".container"),l=document.querySelector(".projectMenu"),u=document.querySelector(".projectSubmit"),m=document.querySelector(".overlay"),p=document.querySelector(".expandedTask"),y=document.querySelector(".projectTitle");function h(e,t){e.classList.add(t),m.classList.add("overlayActive"),i.style.cssText="filter: blur(2px);"}function v(e,t){e.classList.remove(t),m.classList.remove("overlayActive"),i.style.cssText="filter: none;"}function g(){const e=document.querySelector(".taskInfoData"),t=document.querySelector(".taskInfoDataEditable");e.style.cssText="display: block;",t.style.cssText="display: none;"}function f(e){document.querySelectorAll(".button-nav").forEach((e=>{e!==this&&e.classList.remove("active")})),e.classList.add("active")}function k(e){return document.querySelector(`.${e}`).value}function j(){const e=document.querySelectorAll(".button-nav");let t=0,c=0;return e.forEach((e=>{e.classList.contains("active")&&(c=t),t+=1})),c}function x(){d.textContent="",e.getProjects().forEach(((t,c)=>{!function(t){const c=document.querySelector(".project"),n=document.createElement("LI"),o=document.createElement("button"),s=document.createElement("button");o.textContent=t.getProjectName(),s.innerHTML='<img src="img/trash.svg" style="width: 25px; height: 25px;">',o.classList.add(t.getProjectName()),o.classList.add("button-nav"),c.appendChild(n),n.appendChild(o),o.appendChild(s),o.addEventListener("click",(e=>{document.querySelector(".sidebar").classList.toggle("show"),e.target.classList.contains("active")||(console.log(`${t.getProjectName()} is clicked`),f(o),a.textContent="",E(j()))})),s.addEventListener("click",(()=>function(t){e.deleteProject(t.getProjectName()),x()}(t))),S(t.getProjectName()),E(j())}(e.getProject(c))}))}function E(t){a.textContent="",e.getProject(t).name.forEach(((c,n)=>{!function(t){const c=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div"),d=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),u=document.createElement("button"),m=document.createElement("input");var y,f;m.type="checkbox",m.classList.add("check"),c.classList.add("task"),u.classList.add("deleteBtn"),n.classList.add("task2"),o.classList.add("task3"),s.textContent=t.title,r.textContent=t.dueDate,u.innerHTML='<img src="img/trash.svg" style="width: 25px; height: 25px;">',a.appendChild(c),c.appendChild(n),n.appendChild(m),n.appendChild(o),o.appendChild(s),o.appendChild(r),o.appendChild(d),o.appendChild(i),c.appendChild(l),l.appendChild(u),u.addEventListener("click",(()=>function(t){e.getProject(j()).removeTaskByIndex(t.title),E(j())}(t))),m.addEventListener("click",(()=>function(e){!1===e.complete?e.setDone():!0===e.complete&&e.setUnDone(),E(j())}(t))),o.addEventListener("click",(()=>function(e){const t=document.querySelector(".title1"),c=document.querySelector(".date1"),n=document.querySelector(".desc1"),o=document.querySelector(".piority1");t.textContent=e.title,c.textContent=e.dueDate,n.textContent=e.desc,o.textContent=e.piority,h(p,"expandedTaskActive");const s=document.querySelector(".edit");s.style.cssText="display:block;",s.addEventListener("click",(()=>function(e){document.querySelector(".edit").style.cssText="display: none";const t=document.querySelector(".taskInfoData"),c=document.querySelector(".taskInfoDataEditable");t.style.cssText="display: none;",c.style.cssText="display: block;",document.querySelector(".submitEdit").addEventListener("click",(t=>{t.preventDefault(),g(),e.edit(n.value,s.value,o.value,r.value),E(j()),v(p,"expandedTaskActive")}));const n=document.querySelector(".suckt"),o=document.querySelector(".suckdd"),s=document.querySelector(".suckd"),r=document.querySelector(".suckp");n.value=e.title,o.value=e.dueDate,s.value=e.desc,r.value=e.piority}(e)))}(t))),!1===t.complete?(s.style.cssText="text-decoration: none;",c.style.cssText="opacity: 1"):!0===t.complete&&(s.style.cssText="text-decoration-line: line-through;",c.style.cssText="opacity: .5"),y=t.piority,f=o,"low"===y&&(f.style.cssText="border-left: 3px solid green"),"medium"===y&&(f.style.cssText="border-left: 3px solid orange"),"high"===y&&(f.style.cssText="border-left: 3px solid red")}(e.getProject(t).getProjectTask(n))})),y.textContent=e.getProject(j()).getProjectName(),T("projects",e.getProjects())}function S(e){f(document.querySelector(`.${e}`))}function T(e,t){localStorage.setItem(e,JSON.stringify(t))}return{init:function(){!function(e){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}()?alert("no localstorage avaible :("):(console.log("localstorage right here"),localStorage.length<1?function(){console.log("storage empty");const n=new t("Home"),o=new t("Today"),s=new t("Week");e.addProject(n),e.addProject(o),e.addProject(s),x(),e.addTask(j(),new c("task1","desc","20-02-2023","low")),e.addTask(j(),new c("task2","desc","20-02-2023","medium")),e.addTask(j(),new c("task3","desc","20-02-2023","high")),E(j()),S("Home")}():(console.log("storage not empty"),function(){const n=JSON.parse(localStorage.getItem("projects"));n.forEach(((o,s)=>{e.addProject(new t(n[s].projectName)),o.name.forEach(((t,n,o)=>{e.addTask(s,new c(t.title,t.dueDate,t.desc,t.piority))})),E(s)})),x()}())),r.addEventListener("click",(()=>h(n,"fade"))),o.addEventListener("click",(t=>{t.preventDefault(),v(n,"fade"),e.addTask(j(),new c(k("title"),k("desc"),k("date"),k("piority"))),E(j())})),s.addEventListener("click",(()=>{h(l,"projectMenuActive")})),u.addEventListener("click",(c=>{c.preventDefault(),e.addProject(new t(k("projectName"))),x(),v(l,"projectMenuActive")})),m.addEventListener("click",(()=>{v(n,"fade"),v(l,"projectMenuActive"),v(p,"expandedTaskActive"),g()})),T("projects",e.getProjects()),function(){const e=document.querySelector(".sideMenuBtn"),t=document.querySelector(".sidebar");e.addEventListener("click",(()=>{t.classList.toggle("show")}))}()}}})().init()})();